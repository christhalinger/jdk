language: java

jobs:
  include:
    - os: linux
      dist: xenial
    - os: osx
      osx_image: xcode11.1

addons:
  apt:
    packages:
      - libasound2-dev
      - libcups2-dev
      - libx11-dev
      - libxext-dev
      - libxrandr-dev
      - libxrender-dev
      - libxt-dev
      - libxtst-dev

jdk:
    - openjdk13

install:
    - wget https://ci.adoptopenjdk.net/view/Dependencies/job/jtreg/lastSuccessfulBuild/artifact/jtreg-5.0-b01.tar.gz -O $TRAVIS_BUILD_DIR/jtreg.tar.gz
    - tar -xvf $TRAVIS_BUILD_DIR/jtreg.tar.gz -C $TRAVIS_BUILD_DIR
    - export JT_HOME=$TRAVIS_BUILD_DIR/jtreg

script:
  - sh configure
  - make images LOG=info
  - make test-image LOG=info
  - make run-test-jdk_lang
